<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<%@ page import="com.abcnews.entity.User" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>

<%
    User user = (User) session.getAttribute("user");
%>

<c:set var="ctx" value="${pageContext.request.contextPath}" />

<!-- Header chính -->
<div class="header-bar" style="background:#233a5d;padding:16px;color:#fff;display:flex;align-items:center;justify-content:space-between;">
    <div style="display:flex;align-items:center;">
        <a href="${ctx}/HomeServlet" style="display:inline-flex;align-items:center;text-decoration:none;color:inherit;">
            <img src="${ctx}/assets/img/newsicon.png" width="44" style="vertical-align:middle;border-radius:6px;" alt="ABCNews logo"/>
            <span style="font-size:1.6rem;font-weight:700;margin-left:10px;letter-spacing:1px;">ABCNews</span>
        </a>
    </div>

    <div style="font-size:1.05rem;display:flex;align-items:center;gap:12px;">
        <a href="${ctx}/" class="header-link" style="color:#fff;text-decoration:none;padding:8px 10px;border-radius:6px;">Trang chủ</a>
        <a href="${ctx}/news-list" class="header-link" style="color:#fff;text-decoration:none;padding:8px 10px;border-radius:6px;">Tin tức</a>

        <!-- Nếu chưa đăng nhập thì show link Đăng nhập -->
        <c:if test="${empty user}">
            <a href="${ctx}/login.jsp" class="header-link" style="color:#fff;text-decoration:none;padding:8px 10px;border-radius:6px;">Đăng nhập</a>
        </c:if>

        <!-- Nếu đã đăng nhập -->
        <c:if test="${not empty user}">
            <span style="display:flex;align-items:center;gap:8px;color:#fff;">
                <span class="icon-user" aria-hidden="true" style="font-size:1.05rem;"></span>
                Xin chào, <b style="color:#ffe500;margin-left:6px;">${user.fullname}</b>
            </span>
            <a href="${ctx}/LogoutServlet" class="header-link" style="color:#fff;text-decoration:none;padding:8px 10px;border-radius:6px;">Đăng xuất</a>
        </c:if>
    </div>
</div>

<!-- Xuất context path cho JS bên ngoài (nếu có) -->
<script>
    window.APP_CTX = '${ctx}';
</script>