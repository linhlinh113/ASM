<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<%@ page import="com.abcnews.entity.User" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%
    User user = (User) session.getAttribute("user");
%>
<c:set var="ctx" value="${pageContext.request.contextPath}" />

<div class="header-bar" style="background:#233a5d;padding:12px 18px;color:#fff;display:flex;align-items:center;justify-content:space-between;">
    <div style="display:flex;align-items:center;gap:12px;">
        <a href="${ctx}/" style="display:inline-flex;align-items:center;text-decoration:none;color:inherit;">
            <img src="${ctx}/assets/img/newsicon.png" width="44" style="vertical-align:middle;border-radius:6px;" alt="ABCNews logo"/>
            <span style="font-size:1.2rem;font-weight:700;margin-left:6px;letter-spacing:1px;">ABCNews</span>
        </a>
    </div>

    <div style="display:flex;align-items:center;gap:10px;">
        <a href="${ctx}/" class="header-link">Trang chủ</a>
        <a href="${ctx}/NewsListServlet" class="header-link">Tin tức</a>

        <c:if test="${empty user}">
            <a href="${ctx}/login.jsp" class="header-link">Đăng nhập</a>
        </c:if>

        <c:if test="${not empty user}">
            <span style="display:flex;align-items:center;gap:8px;color:#fff;">
                <span class="icon-user" aria-hidden="true"></span>
                Xin chào, <b style="color:#ffe500;margin-left:4px;">${user.fullname}</b>
            </span>
            <a href="${ctx}/LogoutServlet" class="header-link">Đăng xuất</a>
        </c:if>
    </div>
</div>

<script>
    // global context path for external JS files
    window.APP_CTX = '${ctx}';
</script>